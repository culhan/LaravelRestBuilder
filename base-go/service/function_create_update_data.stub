func Service{{ModulName}}{{Name}}( tx *gorm.DB, data map[string]interface{}, c *gin.Context{{UrlParam}}) (interface{}, interface{}) {

    {{code_validation}}
    
    raw_column := []string{}
    this_model := models.{{ModulName}}Model{}
    keyFirstOrCreate := map[string]interface{}{}
    model := models.{{ModulName}}Model{}
    
	{{code_sanitation}}
    // keyFirstOrCreate.Name = data["name"].(string)

    {{custom_code_before}}

    singleData := tx.Session(&gorm.Session{}).Model(&models.{{ModulName}}Model{}).Where(keyFirstOrCreate)
    
    status := singleData.Assign(&this_model).FirstOrCreate(&model)
    
    if status.RowsAffected > 0 {
        singleData.Select(raw_column).Updates(&model)
    }

    {{custom_code_after}}

    var result map[string]interface{}
    inrec, _ := json.Marshal(this_model)
    json.Unmarshal(inrec, &result)

    {{relation_function}}

	resultData, err := repositories.GetSingleWhereData{{ModulName}}(tx, map[string]interface{}{}, model, c) 
    if err != nil {
		return nil, err
	}
	    
	return resultData, nil
}
// end list function